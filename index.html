<!DOCTYPE html>
<html lang="en">
<head>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    <title>377Draft</title>
    <link rel="stylesheet" href="https://d19vzq90twjlae.cloudfront.net/leaflet-0.7.3/leaflet.css" />
    <script src="https://d19vzq90twjlae.cloudfront.net/leaflet-0.7.3/leaflet.js"></script>
    <script src="https://code.jquery.com/jquery-2.1.1.min.js"></script>
    <link rel="stylesheet" href="http://cdn.leafletjs.com/leaflet-0.7.3/leaflet.css"/>
    <script src="http://cdn.leafletjs.com/leaflet-0.7.3/leaflet.js"></script>
    <script src="http://code.jquery.com/jquery-2.1.1.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/leaflet-ajax/2.1.0/leaflet.ajax.min.js"></script>
    <script src='https://api.mapbox.com/mapbox.js/plugins/leaflet-fullscreen/v1.0.1/Leaflet.fullscreen.min.js'></script>
    <link href='https://api.mapbox.com/mapbox.js/plugins/leaflet-fullscreen/v1.0.1/leaflet.fullscreen.css' rel='stylesheet' />
    <link crossorigin="" href="lib/leaflet/leaflet.css"rel="stylesheet" />
    <script src="lib/leaflet/leaflet.js"></script>
    <script src="lib/Leaflet.SmoothMarkerBouncing/leaflet.smoothmarkerbouncing.js"></script>
    <script src="../src/L.Control.Sidebar.js"></script>
<style> 
    #map { height: 700px; width: 1000px }

    .info {
    padding: 6px 8px;
    font: 14px/16px Arial, Helvetica, sans-serif;
    background: white;
    background: rgba(255,255,255,0.8);
    box-shadow: 0 0 15px rgba(0,0,0,0.2);
    border-radius: 5px;
    }
    
    .info h4 {
    margin: 0 0 5px;
    color: #777;
    }

</style>

</head>

<body>
    <div class="teamName"></div>
    <div class="aboutUS"></div>
    <div class="mapTitle"></div>
    <div id="map"></div>
    <div class="list"><b>List of Polling Places</b></div>

<script>
fetch('https://data.princegeorgescountymd.gov/resource/2v6d-7p4w.json')
.then((response) => response.json())
.then((data) => {
  console.log(data);
  const content = document.querySelector('.list');
  let list = document.createElement('ol');
  list.className = 'places';
  content.appendChild(list)
  for(var i = 0; i < data.length; i++) {
    var obj = data[i];
    console.log(obj.name);
    var li = document.createElement('li');
    li.innerHTML = obj.name;
    list.appendChild(li);
}
})

var mymap = L.map('map').setView([38.988136,-76.941567], 10);

L.tileLayer('https://api.tiles.mapbox.com/v4/{id}/{z}/{x}/{y}.png?access_token=pk.eyJ1IjoibWFwYm94IiwiYSI6ImNpejY4NXVycTA2emYycXBndHRqcmZ3N3gifQ.rJcFIG214AriISLbB6B5aw', {
    maxZoom: 18,
    attribution: 'Map data &copy; <a href="https://www.openstreetmap.org/">OpenStreetMap</a> contributors, ' +
        '<a href="https://creativecommons.org/licenses/by-sa/2.0/">CC-BY-SA</a>, ' +
        'Imagery Â© <a href="https://www.mapbox.com/">Mapbox</a>',
    id: 'mapbox.streets'
}).addTo(mymap);


var districts = new L.GeoJSON.AJAX("districts.geojson");
districts.on('data:loaded', function(){
districts.addTo(mymap);
});


$.getJSON("pg.geojson",function(data){
    var locationIcon = L.icon({
      iconUrl: 'https://webstockreview.net/images/election-clipart-officer-15.png',
      iconSize: [30,25]
    });
    L.geoJson(data,{
      pointToLayer: function(feature,latlng){
        var marker = L.marker(latlng,{icon: locationIcon});
        //console.log(feature.properties);
        marker.bindPopup('<b>' + feature.properties.name +'</b>' + '<br/>' + '<b>Address: </b>' + feature.properties.address +
        '</br><b><a href="https://www.google.com/maps/place/' + feature.properties.address + '">Click For Directions</a></b>');
        return marker;
      }
    }).addTo(mymap);
  });

mymap.addControl(new L.Control.Fullscreen({
    title: {
        'false': 'View Fullscreen',
        'true': 'Exit Fullscreen'
    }
}));







</script>

</body>

</html>


